import{u as v,r as d,j as e}from"./main-DTNOWJN-.js";import{a as g}from"./index-t--hEgTQ.js";const s=["Estimated number of people living with HIV_median","Estimated number of people living with HIV_min","Estimated number of people living with HIV_max","Estimated ART coverage among people living with HIV (%)_median","Estimated ART coverage among people living with HIV (%)_min","Estimated ART coverage among people living with HIV (%)_max","rep_meth","new_sp_coh","new_sp_cur","new_sp_cmplt","new_sp_died","new_sp_fail","new_sp_def","c_new_sp_tsr","new_snep_coh","new_snep_cmplt","new_snep_died","new_snep_fail","new_snep_def","c_new_snep_tsr","ret_coh","ret_cur","ret_cmplt","ret_died","ret_fail","ret_def","hiv_new_sp_coh","hiv_new_sp_cur","hiv_new_sp_cmplt","hiv_new_sp_died","hiv_new_sp_fail","hiv_new_sp_def","hiv_new_snep_coh","hiv_new_snep_cmplt","hiv_new_snep_died","hiv_new_snep_fail","hiv_new_snep_def","hiv_ret_coh","hiv_ret_cur","hiv_ret_cmplt","hiv_ret_died","hiv_ret_fail","hiv_ret_def","rel_with_new_flg","newrel_coh","newrel_succ","newrel_fail","newrel_died","newrel_lost","c_new_tsr","ret_nrel_coh","ret_nrel_succ","ret_nrel_fail","ret_nrel_died","ret_nrel_lost","c_ret_tsr","tbhiv_coh","tbhiv_succ","tbhiv_fail","tbhiv_died","tbhiv_lost","c_tbhiv_tsr","mdr_coh","mdr_succ","mdr_fail","mdr_died","mdr_lost","xdr_coh","xdr_succ","xdr_fail","xdr_died","xdr_lost"];function y({onPrediction:m}){const{user:_}=v(),[n,p]=d.useState(Object.fromEntries(s.map(r=>[r,""]))),[o,c]=d.useState(!1),h=async r=>{var t,l;if(r.preventDefault(),!_)return alert("Please login to make predictions");const a=s.filter(i=>!n[i]);if(a.length>0){alert(`Please fill all fields. Missing: ${a.join(", ")}`);return}c(!0);try{const i=s.map(w=>parseFloat(n[w])),f=await g.post("undefined/predict",{features:i},{headers:{Authorization:`Bearer ${_.token}`}});m(f.data.prediction)}catch(i){alert(((l=(t=i.response)==null?void 0:t.data)==null?void 0:l.message)||"Prediction failed"),console.error("Prediction error:",i)}finally{c(!1)}},u=[{title:"HIV Estimates",features:s.slice(0,6)},{title:"TB Treatment Outcomes",features:s.slice(6,26)},{title:"HIV/TB Co-infection",features:s.slice(26,42)},{title:"Retreatment & Drug Resistance",features:s.slice(42)}];return e.jsxs("form",{onSubmit:h,className:"space-y-8 max-w-6xl mx-auto p-6 bg-white rounded-lg shadow",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"TB/HIV Treatment Coverage Prediction"}),u.map((r,a)=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-700 border-b pb-2",children:r.title}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.features.map(t=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:t.replace(/_/g," ").replace(/(%)/g,"$1")}),e.jsx("input",{type:"number",step:"any",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:n[t],onChange:l=>p({...n,[t]:l.target.value}),required:!0})]},t))})]},a)),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:o,className:`px-8 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors ${o?"opacity-50 cursor-not-allowed":""}`,children:o?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Predict ART Coverage"})})]})}export{y as default};
